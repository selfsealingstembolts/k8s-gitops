---
source:
  kind: Deployment
  name: freshrss
  fieldPath: spec.template.spec.containers.[name=freshrss].image
  options:
    delimiter: ':'
    index: 1
targets:
  - select:
      kind: ConfigMap
    fieldPaths: &fieldPaths
      - metadata.labels.[app.kubernetes.io/version]
    options: &options
      create: true
  - select:
      kind: Ingress
    fieldPaths: *fieldPaths
    options: *options
  - select:
      kind: PersistentVolumeClaim
    fieldPaths: *fieldPaths
    options: *options
  - select:
      kind: Secret
    fieldPaths: *fieldPaths
    options: *options
  - select:
      kind: Service
    fieldPaths: *fieldPaths
    options: *options
  - select:
      kind: Deployment
    fieldPaths:
      - metadata.labels.[app.kubernetes.io/version]
      - spec.template.metadata.labels.[app.kubernetes.io/version]
    options: *options
