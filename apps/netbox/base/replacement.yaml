---
source:
  kind: Deployment
  name: netbox
  fieldPath: spec.template.spec.containers.[name=netbox].image
  options:
    delimiter: ':'
    index: 1
targets:
  - select:
      kind: ConfigMap
    fieldPaths: &fieldPaths
      - metadata.labels.[app.kubernetes.io/version]
    options: &options
      create: true
  - select:
      kind: CronJob
    fieldPaths: *fieldPaths
    options: *options
  - select:
      kind: Ingress
    fieldPaths: *fieldPaths
    options: *options
  - select:
      kind: PersistentVolumeClaim
    fieldPaths: *fieldPaths
    options: *options
  - select:
      kind: Secret
    fieldPaths: *fieldPaths
    options: *options
  - select:
      kind: Service
    fieldPaths: *fieldPaths
    options: *options
  - select:
      kind: ServiceAccount
    fieldPaths: *fieldPaths
    options: *options
  - select:
      kind: Deployment
    fieldPaths:
      - metadata.labels.[app.kubernetes.io/version]
      - spec.template.metadata.labels.[app.kubernetes.io/version]
    options: *options
